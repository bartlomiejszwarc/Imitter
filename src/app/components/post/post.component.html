<link
    href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
    rel="stylesheet" />
<link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

<div *ngFor="let post of posts" class="flex justify-center border-b-[1px]">
    <div class="flex w-full px-6 py-2">
        <div class="flex flex-col">
            <div class="flex flex-row justify-start space-x-2 py-2">
                <div>
                    <img
                        *ngIf="post?.author?.profilePicture !== ''"
                        src="{{ post?.author?.profilePicture }}"
                        class="profile-image-post" />
                </div>
                <div class="flex flex-col cursor-pointer">
                    <div class="flex flex-col break-words">
                        <span *ngIf="liked" class="text-slate-700 flex flex-row items-center"
                            ><mat-icon class="icon-heart-liked-list">favorite</mat-icon> {{ userLiked }} liked</span
                        >
                        <div>
                            <span
                                class="font-medium text-lg cursor-pointer"
                                [routerLink]="['/profile', post.author.username]">
                                {{ post?.author?.displayName }}</span
                            >
                            <span *ngIf="post.author" class="font-thin text-lg"> @{{ post?.author?.username }}</span>

                            <div>
                                <span class="font-thin"> {{ post?.date | date : 'h:mm a â€¢ MMM dd, yyyy' }}</span>
                            </div>
                        </div>
                        <div
                            class="pt-2 w-full"
                            [routerLink]="['/profile', this.post?.author?.username, 'status', post._id]">
                            <span class="font-normal text-lg"> {{ post.text }}</span>
                            <img
                                *ngIf="post?.imageUrl !== undefined && post?.imageUrl !== null"
                                src="{{ post?.imageUrl }}"
                                class="image-post" />
                        </div>
                        <div class="flex flex-row space-x-4 py-2">
                            <button
                                class="flex flex-row items-center space-x-1"
                                (click)="onUpdateLikesCounter(post._id, post, currentProfile)">
                                <mat-icon
                                    *ngIf="!checkUserLike(this.post.likedByIdArray)"
                                    class="text-sky-600 hover:bg-sky-100 rounded-full"
                                    >favorite_outline</mat-icon
                                >
                                <mat-icon
                                    *ngIf="checkUserLike(this.post.likedByIdArray)"
                                    class="text-sky-600 hover:bg-sky-100 rounded-full"
                                    >favorite</mat-icon
                                >
                            </button>
                            <button (click)="openDialog(post)">
                                <span class="font-semibold pt-[3px] text-sky-600">{{ post?.likesCounter }}</span>
                            </button>
                            <button
                                class="flex flex-row items-center space-x-1"
                                (click)="onUpdateLikesCounter(post._id, post, currentProfile)">
                                <mat-icon class="text-sky-600 hover:bg-sky-100 rounded-full">chat</mat-icon>
                                <span class="font-semibold pt-[3px] text-sky-600">{{ 0 }}</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="flex flex-col pr-2 pt-3">
        <button mat-icon-button [matMenuTriggerFor]="menu">
            <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu" xPosition="before">
            <div class="flex flex-col px-3 space-y-2">
                <button
                    *ngIf="post?.author?._id === user?.userdata?._id"
                    (click)="onDeletePost(post._id, currentProfile)">
                    <span class="text-slate-800 text-base">Delete this Imitt</span>
                </button>
                <button (click)="onDeletePost(post._id, currentProfile)">
                    <span class="text-slate-800 text-base">Report this Imitt</span>
                </button>
            </div>
        </mat-menu>
    </div>
</div>

<div *ngIf="posts?.length === 0 && postLoaded" class="flex flex-col items-center pt-4">
    <p class="text-slate-800 font-light text-2xl">Nothing to see here</p>
</div>
<div *ngIf="!postLoaded" class="flex flex-row justify-center pt-8 w-full">
    <mat-spinner [diameter]="50" class="custom-spinner"></mat-spinner>
</div>
